"use strict";(self.webpackChunklite=self.webpackChunklite||[]).push([[2106],{81666:(e,n,i)=>{i.d(n,{Rq:()=>P,Kc:()=>x,iu:()=>_,VB:()=>E});var t=i(45458),a=i(78002),d=i(56780),o=i(3152),r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"IframeParagraph_paragraph"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Paragraph"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"iframe"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mediaResource"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"iframeSrc"}},{kind:"Field",name:{kind:"Name",value:"iframeHeight"}},{kind:"Field",name:{kind:"Name",value:"iframeWidth"}},{kind:"Field",name:{kind:"Name",value:"title"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"layout"}},{kind:"FragmentSpread",name:{kind:"Name",value:"Markups_paragraph"}}]}}].concat((0,t.A)(o.dn.definitions))},l=i(64373),m={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodyParagraph_highlight"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Quote"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TextParagraph_highlight"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ImageParagraph_highlight"}}]}}].concat((0,t.A)(a.Bf.definitions),(0,t.A)(d.ZZ.definitions))},s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodyParagraph_privateNote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Note"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TextParagraph_privateNote"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ImageParagraph_privateNote"}}]}}].concat((0,t.A)(a.Os.definitions),(0,t.A)(d.EN.definitions))},c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodyParagraph_paragraph"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Paragraph"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ImageParagraph_paragraph"}},{kind:"FragmentSpread",name:{kind:"Name",value:"TextParagraph_paragraph"}},{kind:"FragmentSpread",name:{kind:"Name",value:"IframeParagraph_paragraph"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MixtapeParagraph_paragraph"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CodeBlockParagraph_paragraph"}}]}}].concat((0,t.A)(d.zl.definitions),(0,t.A)(a.Rc.definitions),(0,t.A)(r.definitions),(0,t.A)(l.Y.definitions),(0,t.A)([{kind:"FragmentDefinition",name:{kind:"Name",value:"CodeBlockParagraph_paragraph"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Paragraph"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"codeBlockMetadata"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lang"}},{kind:"Field",name:{kind:"Name",value:"mode"}}]}}]}}]))},u={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ParagraphStyleGrouping_highlight"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Quote"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PostBodyParagraph_highlight"}}]}}].concat((0,t.A)(m.definitions))},k={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ParagraphStyleGrouping_privateNote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Note"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PostBodyParagraph_privateNote"}}]}}].concat((0,t.A)(s.definitions))},g={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ParagraphLayoutGrouping_privateNote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Note"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ParagraphStyleGrouping_privateNote"}}]}}].concat((0,t.A)(k.definitions))},p={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ParagraphLayoutGrouping_highlight"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Quote"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ParagraphStyleGrouping_highlight"}}]}}].concat((0,t.A)(u.definitions))},f={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodySection_paragraph"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Paragraph"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostBodyParagraph_paragraph"}}]}}].concat((0,t.A)(c.definitions))},h={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodySection_highlight"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Quote"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ParagraphLayoutGrouping_highlight"}}]}}].concat((0,t.A)(p.definitions))},v={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodySection_privateNote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Note"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ParagraphLayoutGrouping_privateNote"}}]}}].concat((0,t.A)(g.definitions))},N=i(73807),S=i(77485),y={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostNotesDetails_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"imageId"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserAvatar_user"}}]}}].concat((0,t.A)(S.R.definitions))},F={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostNotesMarkers_highlight"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Quote"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"endOffset"}},{kind:"Field",name:{kind:"Name",value:"paragraphs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"startOffset"}},{kind:"Field",name:{kind:"Name",value:"userId"}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostNotesDetails_user"}}]}}]}}].concat((0,t.A)(y.definitions))},P={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBody_bodyModel"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RichText"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"startIndex"}},{kind:"Field",name:{kind:"Name",value:"textLayout"}},{kind:"Field",name:{kind:"Name",value:"imageLayout"}},{kind:"Field",name:{kind:"Name",value:"backgroundImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"originalHeight"}},{kind:"Field",name:{kind:"Name",value:"originalWidth"}}]}},{kind:"Field",name:{kind:"Name",value:"videoLayout"}},{kind:"Field",name:{kind:"Name",value:"backgroundVideo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"videoId"}},{kind:"Field",name:{kind:"Name",value:"originalHeight"}},{kind:"Field",name:{kind:"Name",value:"originalWidth"}},{kind:"Field",name:{kind:"Name",value:"previewImageId"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"paragraphs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostBodySection_paragraph"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"normalizedBodyModel_richText"}}]}}].concat((0,t.A)(f.definitions),(0,t.A)(N.xr.definitions))},_={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBody_highlight"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Quote"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paragraphs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"getParagraphHighlights_highlight"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostBodySection_highlight"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostNotesMarkers_highlight"}}]}}].concat((0,t.A)(N.BW.definitions),(0,t.A)(h.definitions),(0,t.A)(F.definitions))},x={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBody_creator"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PostNotesMarkers_creator"}}]}}].concat((0,t.A)([{kind:"FragmentDefinition",name:{kind:"Name",value:"PostNotesMarkers_creator"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]))},E={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBody_privateNote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Note"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"normalizedBodyModel_privateNote"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostBodySection_privateNote"}}]}}].concat((0,t.A)(N.VU.definitions),(0,t.A)(v.definitions))}},47043:(e,n,i)=>{i.d(n,{N:()=>Z});var t=i(58168),a=i(45458),d=i(96540),o=i(70370),r=i(44402),l={display:"flex",justifyContent:"center",marginTop:"32px",marginBottom:"14px",paddingTop:"24px",paddingBottom:"10px"},m=function(e){return{backgroundColor:e.colorTokens.foreground.neutral.primary.hover,borderRadius:"50%",display:"inline-block",height:"3px",width:"3px"}},s={marginRight:"20px"};function c(){var e=(0,r.l)();return d.createElement("div",{className:e(l),role:"separator"},d.createElement("span",{className:e([m,s])}),d.createElement("span",{className:e([m,s])}),d.createElement("span",{className:e(m)}))}var u=i(7045),k=i(80296),g=i(82284),p=i(55127),f=i.n(p),h=i(23393),v=i(52290),N=i(33154),S=i(20239),y=i(66305);function F(e){var n=e.grid.xStep;return{padding:"".concat(3*n,"px ").concat(4*n,"px ").concat(3*n,"px"),width:"400px"}}function P(e){var n=e.close,i=e.users,t=(0,r.l)(),a=d.useRef(null),o=(0,S.D)(),l=o.grid.xStep;return d.useEffect((function(){function e(){var e=a.current;if(e&&e.getBoundingClientRect){var i=e.getBoundingClientRect(),t=i.bottom,d=i.top<0||t>window.innerHeight,r=window.innerWidth<o.breakpoints.xl;(d||r)&&n()}}return y.R5.on("scroll_end",e),y.R5.on("resize_throttled",e),function(){y.R5.off("scroll_end",e),y.R5.off("resize_throttled",e)}}),[]),d.createElement("section",{ref:a,className:t(F)},d.createElement(v.a,{borderBottom:"neutral.primary",marginBottom:"-".concat(l,"px"),paddingBottom:"".concat(2*l,"px")},d.createElement(N.bz,null,"Highlights (".concat(i.length,")"))),d.createElement(v.a,{marginLeft:"3px"},i.length&&i.map((function(e){return d.createElement(v.a,{display:"inline-block",key:e.id,marginTop:"".concat(5*l,"px"),marginRight:"".concat(5*l,"px"),width:"".concat(8*l,"px")},d.createElement(h.H8,{hasPopover:!0,link:!0,user:e,scale:"XS"}))}))))}var _=d.memo(P),x=i(4171),E=i(19),A=i(86322),b=i(52764),D=i(21335),B=i(85864),T=i(36557),w=i(12378),C=i(24023);function R(){return{border:"none",cursor:"pointer",display:"block",padding:"0px",textAlign:"left",width:"100%"}}function O(){return{left:"100%",position:"absolute",top:0}}function I(e,n){return{marginTop:"6px",maxWidth:"100%",position:"absolute",top:"".concat(e-(n||0),"px"),whiteSpace:"nowrap",width:"100%"}}function M(e){return{marginLeft:"auto",marginRight:"auto",maxWidth:"".concat((0,w.z)(e,8,!0),"px"),position:"relative"}}function H(){return{display:"inline-block",maxWidth:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}function L(e,n){return"number"==typeof e.startOffset&&"number"==typeof n.startOffset?e.startOffset<n.startOffset?-1:1:-1}function z(e,n){var i=n.startOffset,t=n.endOffset,a=n.paragraphs[0].name;if(!a||"number"!=typeof i||"number"!=typeof t)return e;var d=!1,o=e[a]||[];return o.length&&(o=o.map((function(e){var a=i<=e.endOffset+1,o=e.startOffset,r=e.endOffset;return a&&(d=!0,e.highlights.push(n),r=Math.max(t,e.endOffset),o=Math.min(i,e.startOffset)),{highlights:e.highlights,endOffset:r,startOffset:o}}))),d||o.push({highlights:[n],endOffset:t,startOffset:i}),e[a]=o,e}function G(e){var n=e.children,i=e.highlightString,t=e.toggle,a=(0,r.l)();return"Top highlight"===i?d.createElement(d.Fragment,null,n):d.createElement("button",{className:a(R),onClick:function(){return t()},onMouseDown:function(e){return e.preventDefault()}},n)}function W(e){var n=e.creator,i=e.positionMap,t=e.yPosOffset,a=e.viewerEdge,o=(0,r.l)();if("number"!=typeof t)return null;var l=Array.from(i.entries());return d.createElement(b.c,{nonBlocking:!0},(function(e){return d.createElement(d.Fragment,null,l.map((function(i,r){var l=(0,k.A)(i,2),m=l[0],s=l[1],c=function(e,n,i,t){var a=null==t?void 0:t.isFollowing;if(1===e.length){if("anon"===e[0].userId)return"Top highlight";if(!n)return null;if(i&&i.id===e[0].userId&&n.id!==i.id&&!a)return null;if(n&&n.id===e[0].userId)return"You highlighted";if(e[0].user&&e[0].user.name)return e[0].user.name}var d=[];if(e.forEach((function(e){if(e.user){var t=n&&n.id===e.userId,o=e.user.name,r=i&&i.id===e.userId&&(!n||n.id!==i.id&&!a);t?d.length&&"You"===d[0]||d.unshift("You"):r||!o||d.includes(o)||d.push(o)}})),!d.length)return"Top highlight";if(1===d.length)return"You"===d[0]?"You highlighted":d[0];if(2===d.length)return"".concat(d[0]," and ").concat(d[1]);var o=d.slice(0,2),r=d.length-o.length;return"".concat(o[0],", ").concat(o[1],", and ").concat(r," ").concat(f()("other",r))}(s,e,n,a);return c?d.createElement("div",{className:o(I(m,t)),key:r},d.createElement(B.B,null,(function(e){var n=e.isVisible,i=e.hide,t=e.toggle;return d.createElement(d.Fragment,null,d.createElement(G,{toggle:t,highlightString:c},d.createElement(T.kZ,{scale:"S"},d.createElement("span",{className:o(H)},c))),n&&d.createElement(E.K,{boundariesElement:"document",isVisible:!0,hide:i,placement:"right",popoverRenderFn:function(){var e=new Set,n=s.map((function(n){var i=n.user;return i&&i.id&&!e.has(i.id)?(e.add(i.id),i):null})).filter(C.se);return d.createElement(_,{close:i,users:n})}},d.createElement(d.Fragment,null)))}))):null})))}))}var Y=d.forwardRef((function(e,n){var i=e.creator,t=e.highlights,o=d.useContext(x.q).highlightSegments,l=d.useRef(null),m=d.useState(null),s=(0,k.A)(m,2),c=s[0],u=s[1],p=(0,r.l)(),f=(0,S.D)(),h=d.useState(null),N=(0,k.A)(h,2),F=N[0],P=N[1],_=d.useState(null),E=(0,k.A)(_,2),b=E[0],B=E[1],T=(0,D.cd)(i).viewerEdge;return d.useEffect((function(){var e=function(){var e=function(e,n,i){var t=new Map;if(e.size&&n.length){var d=function(e){var n=(0,a.A)(e).sort(L).reduce(z,{});return Object.values(n).reduce((function(e,n){return n&&"object"===(0,g.A)(n)&&n.length?(e.push.apply(e,(0,a.A)(n)),e):e}),[])}(n),o=[];d.forEach((function(n){var a=n.highlights[0],d=a.paragraphs[0].name;if(a&&"number"==typeof a.startOffset&&d){var r=e.get("".concat(d,"_").concat(a.startOffset));if(r&&r.ref&&r.ref.current){var l,m=r.ref.current.getBoundingClientRect().top+window.pageYOffset;o.length&&(l=o.find((function(e){return m<e+i.newFonts.body.lineHeight.M&&m>e||m>e-i.newFonts.body.lineHeight.M&&m<e})));var s=l||m,c=t.get(s)||[];c.length||o.push(s);var u=c.concat(n.highlights);u.length&&t.set(s,u)}}}))}return t}(o,t,f);if(u(e),"function"!=typeof n&&null!=n&&n.current&&B(n.current.offsetTop),null!=l&&l.current){var i=l.current.getBoundingClientRect().left,d=window.innerWidth-i-8*f.grid.xStep;P(d)}};y.R5.on("resize_throttled",e);var i=(0,A.u)((function(n){"iframe.resize"!==n.context&&"player.js"!==n.context||e()})).destructor;return e(),function(){y.R5.off("resize_throttled",e),i()}}),[t,o]),d.createElement("div",{className:p(M)},d.createElement(v.a,{display:"block",xs:{display:"none"},sm:{display:"none"},md:{display:"none"},lg:{display:"none"},speechifyIgnore:!0},d.createElement("aside",{className:p(O),ref:l,style:{width:F?"".concat(F,"px"):void 0}},c&&d.createElement(W,{creator:i,highlights:t,positionMap:c,yPosOffset:b,width:F,viewerEdge:T}))))})),U=d.memo(Y),Q=i(98503);function V(e,n){var i;return Object.keys(e).some((function(t){return!!e[t].find((function(e){return e.insertType===n}))&&(i=t,!0)})),i}var j=i(49728),Z=d.forwardRef((function(e,n){var i,l,m=e.bodyModel,s=e.creator,k=e.highlights,g=e.isAuroraPostPageEnabled,p=e.privateNotes,f=e.postBodyInserts,h=e.richTextStyle,v=void 0===h?"FULL_PAGE":h,N=e.shouldHideHighlightAnnotations,S=void 0!==N&&N,y=(0,r.l)(),F=d.createRef(),P=null===(i=d.useContext(o._I).watchedBounds.get("byline"))||void 0===i||null===(l=i.ref)||void 0===l?void 0:l.current,_=P?P.offsetTop-48:100,x={position:"absolute",left:0,top:"calc(100vh + ".concat(_,"px)"),bottom:"calc(100vh + ".concat(100,"px)"),width:"10px",pointerEvents:"none"},E=(0,Q.v)().privateNoteSelection,A=d.useMemo((function(){return k&&E?[].concat((0,a.A)(k),[E]):k}),[k,E]),b=f?function(e){return V(e,"BYLINE")}(f):void 0,D=f?function(e){return V(e,"METER")}(f):void 0,B=d.useMemo((function(){return(0,j.Vg)(m,{bylineParagraphName:b,meterParagraphName:D,highlights:A,isAuroraPostPageEnabled:g,isPostPage:!0,privateNotes:p,richTextStyle:v})}),[m,A,p,v]),T=f&&f.first;return d.createElement("section",{ref:n},d.createElement("div",{ref:F},d.createElement(d.Fragment,null,d.createElement(o.B,{name:"ghost-track",type:"ghost",className:y(x)}),"FULL_PAGE"===v&&k&&k.length>0&&!S&&d.createElement(U,{creator:s,highlights:(0,a.A)(k),ref:n}),!!T&&T.map((function(e,n){return e.component?d.createElement("div",{key:"postBodyInsertFirst_".concat(n)},e.component):null}))),B.map((function(e,n){if("HR"===e){var i,a,o=B[n-1],r=B[n+1],l="HR"!==o&&(null==o||null===(i=o.section)||void 0===i?void 0:i.backgroundImage),m="HR"!==r&&(null==r||null===(a=r.section)||void 0===a?void 0:a.backgroundImage);return l||m?null:d.createElement(c,{key:n})}return d.createElement(u.e,(0,t.A)({key:e.section.name||n,postBodyInserts:f},e))}))))}))}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/2106.21ff89d3.chunk.js.map